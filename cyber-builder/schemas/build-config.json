{
  "$ref": "#/definitions/build-config",
  "definitions": {
    "build-config": {
      "type": "object",
      "required": ["build", "unitKindDefinitions"],
      "properties": {
        "unitKindDefinitions": {
          "type": "array",
          "items": { "$ref": "#/definitions/unit-kind-definition" }
        },
        "hooks": { "$ref": "#/definitions/build-hooks" },
        "build": {}
      },
      "additionalProperties": false
    },
    "unit-kind-definition": {
      "type": "object",
      "required": [ "kind", "version", "configSchema", "methods" ],
      "properties": {
        "kind": { "type": "string" },
        "version": { 
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+(-[a-zA-Z]+)?$"
        },
        "configSchema": { "isSchema": true },
        "methods": { "$ref": "#/definitions/build-hooks" }
      }
    },
    "build-hooks": {
      "type": "object",
      "additionalProperties": { "isLambda": true }
    }
  }
}